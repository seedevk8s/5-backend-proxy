sequenceDiagram
    participant Client as 클라이언트
    participant Proxy as OrderController<br/>Proxy
    participant Handler as InvocationHandler<br/>(동적 프록시)
    participant LogTrace as ThreadLocal<br/>LogTrace
    participant Controller as OrderController<br/>(실제 객체)
    participant ServiceProxy as OrderService<br/>Proxy
    participant ServiceHandler as InvocationHandler<br/>(동적 프록시)
    participant Service as OrderService<br/>(실제 객체)
    participant RepoProxy as OrderRepository<br/>Proxy
    participant RepoHandler as InvocationHandler<br/>(동적 프록시)
    participant Repository as OrderRepository<br/>(실제 객체)

    Note over Client, Repository: HTTP 요청: GET /v1/request?itemId=choongang

    Client->>+Proxy: request("choongang")
    Proxy->>+Handler: invoke(proxy, method, args)
    Handler->>+LogTrace: begin("OrderController.request()")
    LogTrace-->>-Handler: TraceStatus [12564b6b]
    Note over LogTrace: [12564b6b] OrderController.request()
    
    Handler->>+Controller: request("choongang")
    Controller->>+ServiceProxy: orderItem("choongang")
    ServiceProxy->>+ServiceHandler: invoke(proxy, method, args)
    ServiceHandler->>+LogTrace: begin("OrderService.orderItem()")
    LogTrace-->>-ServiceHandler: TraceStatus [12564b6b]
    Note over LogTrace: [12564b6b] |-->OrderService.orderItem()
    
    ServiceHandler->>+Service: orderItem("choongang")
    Service->>+RepoProxy: save("choongang")
    RepoProxy->>+RepoHandler: invoke(proxy, method, args)
    RepoHandler->>+LogTrace: begin("OrderRepository.save()")
    LogTrace-->>-RepoHandler: TraceStatus [12564b6b]
    Note over LogTrace: [12564b6b] |   |-->OrderRepository.save()
    
    RepoHandler->>+Repository: save("choongang")
    Note over Repository: 1초 대기 (비즈니스 로직)
    Repository-->>-RepoHandler: 처리 완료
    
    RepoHandler->>+LogTrace: end(TraceStatus, null)
    LogTrace-->>-RepoHandler: 로그 출력
    Note over LogTrace: [12564b6b] |   |<--OrderRepository.save() time=1015ms
    RepoHandler-->>-RepoProxy: 결과 반환
    RepoProxy-->>-Service: 결과 반환
    
    Service-->>-ServiceHandler: 결과 반환
    ServiceHandler->>+LogTrace: end(TraceStatus, null)
    LogTrace-->>-ServiceHandler: 로그 출력
    Note over LogTrace: [12564b6b] |<--OrderService.orderItem() time=1015ms
    ServiceHandler-->>-ServiceProxy: 결과 반환
    ServiceProxy-->>-Controller: 결과 반환
    
    Controller-->>-Handler: 결과 반환
    Handler->>+LogTrace: end(TraceStatus, null)
    LogTrace-->>-Handler: 로그 출력
    Note over LogTrace: [12564b6b] OrderController.request() time=1015ms
    Handler-->>-Proxy: 결과 반환
    Proxy-->>-Client: HTTP 응답

    Note over Client, Repository: 모든 메서드 호출이 프록시를 통해 로그 추적됨